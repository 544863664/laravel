(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3809cd02"],{"1caf":function(e,t,a){"use strict";var n=a("c560"),s=a.n(n);s.a},"34a1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Stockpend_list"},[a("div",{staticClass:"search"},[a("div",{staticClass:"demo-input-suffix"},[a("el-input",{staticStyle:{width:"30.625rem"},attrs:{"suffix-icon":"el-icon-search",autofocus:"",placeholder:"搜索"},on:{input:e.searchChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchChange(t)}},model:{value:e.search_name,callback:function(t){e.search_name="string"===typeof t?t.trim():t},expression:"search_name"}},[a("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.searchChange},slot:"append"},[e._v("搜索")])],1),a("el-button",{attrs:{type:"info",plain:""},on:{click:e.clearSearchChange}},[e._v("全部")]),a("el-input",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{"suffix-icon":"el-icon-full-screen",autofocus:"",placeholder:"标准件编码入库"},on:{input:e.patternsave},model:{value:e.parts_number,callback:function(t){e.parts_number="string"===typeof t?t.trim():t},expression:"parts_number"}})],1)]),a("el-table",{ref:"stockpendTableData",attrs:{data:e.stockpendTableData.tableData}},[a("el-table-column",{attrs:{label:"零件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.product_name))])]}}])}),a("el-table-column",{attrs:{label:"图片",prop:"image"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{height:"400px"},attrs:{src:e.row.image}}),a("img",{staticStyle:{height:"50px",width:"50px","min-height":"50px","min-width":"50px"},attrs:{slot:"reference",src:e.row.image},slot:"reference"})])]}}])}),a("el-table-column",{attrs:{label:"代号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.item||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"型号规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.specs||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.category))])]}}])}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"primary",size:"small"},on:{click:function(a){return e.clickstock(t.row)}}},[e._v("详情")])]}}])})],1),a("div",{staticClass:"block"},[e.stockpendTableData.total>10?a("el-pagination",{attrs:{"page-size":e.stockpendTableData.pageSize,layout:"prev, pager, next, jumper",total:e.stockpendTableData.total},on:{"current-change":e.handleCurrentChange}}):e._e()],1),a("Stockpend",{ref:"child",attrs:{stockpendDialogVisible:e.stockpendDialogVisible},on:{change:e.stockpendClose}})],1)},s=[],o=a("cebc"),l=a("2f62"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"stockpend_dialog",attrs:{visible:e.stockpendDialogVisible.dialog,top:"10vh","close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){return e.$set(e.stockpendDialogVisible,"dialog",t)},close:e.close}},[a("div",{staticClass:"stockpenddialog"},[a("div",{staticClass:"search"},[a("div",{staticClass:"demo-input-suffix"},[a("el-input",{staticStyle:{width:"30.625rem"},attrs:{"suffix-icon":"el-icon-full-screen",autofocus:e.autofocus,maxlength:"8",placeholder:"零件条码入库"},on:{change:e.getfocus,input:e.searchChange},model:{value:e.search_name,callback:function(t){e.search_name="string"===typeof t?t.trim():t},expression:"search_name"}}),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("待入库个数："+e._s(e.stockpendTableData.tableData.length))])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.stockpendTableData.loading,expression:"stockpendTableData.loading "}],ref:"stockpendTableData",attrs:{data:e.stockpendTableData.tableData,height:"528","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"序号",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.id))])]}}])}),a("el-table-column",{attrs:{label:"零件名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.product_name))])]}}])}),a("el-table-column",{attrs:{label:"代号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.item||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"型号规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.specs||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"零件条码",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.parts_number))])]}}])}),a("el-table-column",{attrs:{label:"批次",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.batch))])]}}])}),a("el-table-column",{attrs:{label:"数量",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{label:"入库状态",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(2==t.row.is_use?"已入库":"未入库"))])]}}])})],1)],1)])],1)},i=[],c=(a("c5f6"),{name:"Singledialog",components:{},computed:Object(o["a"])({},Object(l["c"])({url:function(e){return e.url}}),Object(l["b"])({token:"getToken"})),props:{stockpendDialogVisible:""},data:function(){return{obj:"",search_name:"",autofocus:!0,stockpendTableData:{tableData:[],currentPage:1,pageSize:10,total:0,loading:!0},statusLeng:0,row:{},nullImg:"http://zrui.e7vr.com/image/arm/default.gif"}},methods:{getSingle:function(){var e=this;e.autofocus=!0;var t=e.stockpendDialogVisible.obj;e.axios({method:"GET",url:e.url+"/api/v1/pattern/product-list-detail",params:{product_id:t.row.product_id,express_type:t.express_type,express_numbers:t.express_numbers,send_supplier_id:t.send_supplier_id,send_shop_id:t.send_shop_id,send_time:t.send_time},headers:{"content-type":"application/json",token:e.token}}).then(function(t){if(t&&t.data&&t.data.data&&200==t.data.code){var a=t.data.data;a.map(function(t){return 2==t.is_use?(t.success=!0,e.statusLeng+=1,t.num_=t.number):(t.success=!1,t.num_=0),t}),e.stockpendTableData.loading=!1,e.stockpendTableData.tableData=a}}).catch(function(t){console.log(t),e.stockpendTableData.loading=!1})},searchChange:function(){var e=this;8==e.search_name.length&&e.axios({method:"GET",url:e.url+"/api/v1/pattern/generate",data:"",params:{category:e.search_name},headers:{"content-type":"application/json",token:e.token}}).then(function(t){if(t&&t.data&&t.data.data&&200==t.data.code){var a=t.data.data,n=e.stockpendTableData.tableData,s=0;n.map(function(t,o){if(1==t.is_use&&(1==t.product_type&&a.category==e.search_name&&a.id==Number(t.product_id)&&(t.num_=t.number,s+=1,n.length==s&&e.patternsave(e.search_name,o)),2==t.product_type&&t.num_<t.number&&t.parts_number==e.search_name))return t.num_+=1,e.patternsave(e.search_name,o),!1})}}).catch(function(e){console.log(e)})},patternsave:function(e,t){var a=this;a.axios({method:"GET",url:a.url+"/api/v1/pattern/product-save",params:{parts_number:e},headers:{"content-type":"application/json",token:a.token}}).then(function(e){if(e&&e.data&&200==e.data.code){a.$message({type:"success",message:"操作成功",offset:400}),a.search_name="";var n=a.stockpendTableData.tableData;n.splice(t,1)}}).catch(function(e){console.log(e),a.$message({message:a.errmessage(e.response.data),type:"warning"})})},clearSearchChange:function(){this.search_name=""},handleCurrentChange:function(e){this.stockpendTableData.currentPage=e,this.getSingle()},getfocus:function(){this.autofocus=!0},close:function(){this.statusLeng=0,this.search_name="",this.autofocus=!0,this.stockpendTableData={tableData:[],currentPage:1,pageSize:10,total:0,loading:!0},this.$emit("change",!1)}}}),u=c,p=(a("1caf"),a("2877")),d=Object(p["a"])(u,r,i,!1,null,"4341971d",null),h=d.exports,_={name:"Stockpend_list",components:{Stockpend:h},computed:Object(o["a"])({},Object(l["c"])({url:function(e){return e.url}}),Object(l["b"])({token:"getToken"})),data:function(){return{obj:{express_type:"",express_numbers:"",send_supplier_id:"",send_shop_id:""},search_name:"",parts_number:"",stockpendTableData:{tableData:[],currentPage:1,pageSize:15,total:0},statusLeng:0,row:{},nullImg:"http://zrui.e7vr.com/image/arm/default.gif",stockpendDialogVisible:{dialog:!1,obj:{}}}},created:function(){this.stockpendDialogVisible.obj=this.obj={express_type:this.$route.query.express_type,express_numbers:this.$route.query.express_numbers,send_supplier_id:this.$route.query.send_supplier_id,send_shop_id:this.$route.query.send_shop_id,send_time:this.$route.query.send_time},this.getSingle()},methods:{getSingle:function(){var e=this;e.autofocus=!0,e.axios({method:"GET",url:e.url+"/api/v1/pattern/product-list",params:{page:e.stockpendTableData.currentPage,size:e.stockpendTableData.pageSize,name:e.search_name,express_type:e.obj.express_type,express_numbers:e.obj.express_numbers,send_supplier_id:e.obj.send_supplier_id,send_shop_id:e.obj.send_shop_id,send_time:e.obj.send_time},headers:{"content-type":"application/json",token:e.token}}).then(function(t){if(t&&t.data&&t.data.data&&200==t.data.code){var a=t.data.data;e.stockpendTableData.total=a.count.total,a.list.map(function(t){return 2==t.is_use?(t.success=!0,e.statusLeng+=1,t.num_=t.number):(t.success=!1,t.num_=0),t}),e.stockpendTableData.tableData=a.list}}).catch(function(e){console.log(e)})},searchChange:function(){this.tableData.currentPage=1,this.search_name||(this.search_name=""),this.getSingle()},patternsave:function(){var e=this;8==e.parts_number.length&&e.axios({method:"GET",url:e.url+"/api/v1/pattern/product-save",params:{parts_number:e.parts_number},headers:{"content-type":"application/json",token:e.token}}).then(function(t){t&&t.data&&200==t.data.code&&(e.$message({type:"success",message:"操作成功",offset:200}),e.parts_number="",e.getSingle())}).catch(function(t){console.log(t),e.$message({message:e.errmessage(t.response.data),type:"warning"})})},clickstock:function(e){this.stockpendDialogVisible.dialog=!0,this.stockpendDialogVisible.obj.row=e,this.$refs.child.getSingle()},clearSearchChange:function(){this.search_name=""},handleCurrentChange:function(e){this.stockpendTableData.currentPage=e,this.getSingle()},stockpendClose:function(e){this.stockpendDialogVisible.dialog=e,this.getSingle()}}},m=_,f=(a("74b1"),Object(p["a"])(m,n,s,!1,null,"4cc8723d",null));t["default"]=f.exports},"64e9":function(e,t,a){},"74b1":function(e,t,a){"use strict";var n=a("64e9"),s=a.n(n);s.a},c560:function(e,t,a){}}]);