(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d983634e"],{"0d96":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Recorddetail"},[a("el-table",{staticStyle:{width:"100%","margin-bottom":"1rem"},attrs:{data:e.tableDatas,"header-cell-style":e.tableheader}},[a("el-table-column",{attrs:{label:"序号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled1?a("el-link",{staticStyle:{width:"100px"},attrs:{underline:!1},on:{click:function(a){return e.serial_numberfocus(t.$index)}}},[e._v(e._s(t.row.serial_number||"--"))]):e._e(),t.row.disabled1?e._e():a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:"",size:"mini"},on:{blur:function(a){return e.handleblurserial_number(t.row.serial_number_,t.$index)}},model:{value:t.row.serial_number_,callback:function(a){e.$set(t.row,"serial_number_",a)},expression:"scope.row.serial_number_"}})]}}])}),a("el-table-column",{attrs:{label:"批次",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled2?a("el-link",{staticStyle:{width:"100px"},attrs:{underline:!1},on:{click:function(a){return e.batchfocus(t.$index)}}},[e._v(e._s(t.row.batch||"--"))]):e._e(),t.row.disabled2?e._e():a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:"",disabled:t.row.disabled2,size:"mini"},on:{blur:function(a){return e.handleblurbatch(t.row.batch_,t.$index)}},model:{value:t.row.batch_,callback:function(a){e.$set(t.row,"batch_",a)},expression:"scope.row.batch_"}})]}}])}),a("el-table-column",{attrs:{label:"图片",prop:"image",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",title:"",trigger:"click"}},[a("img",{staticStyle:{height:"400px"},attrs:{src:e.row.img}}),a("img",{staticStyle:{height:"50px",width:"50px"},attrs:{slot:"reference",src:e.row.img,alt:""},slot:"reference"})])]}}])}),a("el-table-column",{attrs:{label:"图样代号",prop:"item_"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.item_||"--"))])]}}])}),a("el-table-column",{attrs:{label:"图样名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.product_name||"--"))])]}}])}),a("el-table-column",{attrs:{label:"材料",prop:"material_"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.material_||"--"))])]}}])}),a("el-table-column",{attrs:{label:"型号规格",prop:"specs_"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.specs_||"--"))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.number||"--"))])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.createTime))])]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remark"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{},[e._v(e._s(t.row.remark||"--"))])]}}])}),a("el-table-column",{attrs:{prop:"type",label:"记录来源",width:"130",filters:[{text:"入库",value:1},{text:"托盘出库",value:2},{text:"出库",value:3}],"filter-method":e.filterTag,"filter-placement":"bottom-end",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary",underline:!1}},[e._v(e._s(t.row.type_))])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-size":e.pagesize,layout:"prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},n=[],l=a("cebc"),s=a("2f62"),i={name:"Recorddetail",computed:Object(l["a"])({},Object(s["b"])({url:"geturl",token:"getToken"})),data:function(){return{search_name:"",search_material:"",search_item:"",search_specs:"",go_num:"",pagesize:15,currpage:1,tableDatas:[],total:0}},created:function(){this.getRecordList()},methods:{tableheader:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"height:40px;background:#e5e5e5"},filterTag:function(e,t){return t.type===e},serial_numberfocus:function(e){this.tableDatas[e].disabled1=!1},handleblurserial_number:function(e,t){var a=this;if(e==a.tableDatas[t].serial_number)a.tableDatas[t].disabled1=!0;else{a.tableDatas[t].disabled1=!0;var r={parts_id:a.tableDatas[t].id,batch:a.tableDatas[t].batch,serial_number:e};a.recordupdate(r)}},batchfocus:function(e){this.tableDatas[e].disabled2=!1},handleblurbatch:function(e,t){var a=this;if(e==a.tableDatas[t].batch)a.tableDatas[t].disabled2=!0;else{a.tableDatas[t].disabled2=!0;var r={parts_id:a.tableDatas[t].id,batch:e,serial_number:a.tableDatas[t].serial_number};a.recordupdate(r)}},getRecordList:function(){var e=this;Date.prototype.toLocaleString=function(){return this.getFullYear()+"/"+(this.getMonth()+1<10?"0"+(this.getMonth()+1):this.getMonth()+1)+"/"+(this.getDate()<10?"0"+this.getDate():this.getDate())+" "+(this.getHours()<10?"0"+this.getHours():this.getHours())+":"+(this.getMinutes()<10?"0"+this.getMinutes():this.getMinutes())+":"+(this.getSeconds()<10?"0"+this.getSeconds():this.getSeconds())},e.axios({method:"GET",url:e.url+"/api/v1/record/detail",data:"",params:{page:e.currpage,size:e.pagesize,operation_id:e.$route.query.id},headers:{"content-type":"application/x-www-form-urlencoded",token:e.token}}).then(function(t){if(t&&t.data&&t.data.data&&200==t.data.code){var a=t.data.data.list;e.total=t.data.data.count.total;for(var r=0;r<a.length;r++){a[r].disabled1=!0,a[r].disabled2=!0,a[r].serial_number_=a[r].serial_number,a[r].batch_=a[r].batch,a[r].type_=1==a[r].type?"入库":2==a[r].type?"托盘出库":"出库",a[r].createTime=new Date(1e3*a[r].created_at).toLocaleString().slice(0,-3);var n=a[r].image;a[r].img=""==n||void 0==n?"http://zrui.e7vr.com/image/arm/default.gif":a[r].image;var l=a[r].specs;a[r].specs_=""==l||void 0==l||null==l?"-- --":a[r].specs;var s=a[r].material;a[r].material_=""==s||void 0==s||null==s?"-- --":a[r].material;var i=a[r].item;a[r].item_=""==i||void 0==i||null==i?"-- --":a[r].item}e.tableDatas=a}}).catch(function(e){console.log(e)})},recordupdate:function(e){var t=this;t.axios({method:"POST",url:t.url+"/api/v1/record/update",data:"",params:e,headers:{"content-type":"application/x-www-form-urlencoded",token:t.token}}).then(function(e){e&&e.data&&e.data.data&&200==e.data.code&&(t.$message({type:"success",message:"修改成功",offset:300}),t.getRecordList())}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currpage=e,this.getRecordList()}},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}}},o=i,c=(a("581d"),a("2877")),u=Object(c["a"])(o,r,n,!1,null,"4409572f",null);t["default"]=u.exports},"581d":function(e,t,a){"use strict";var r=a("bfe8"),n=a.n(r);n.a},bfe8:function(e,t,a){}}]);