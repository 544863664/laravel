(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66245e20"],{"0993":function(t,e,a){"use strict";var r=a("64b8"),n=a.n(r);n.a},1368:function(t,e,a){"use strict";var r=a("7470"),n=a.n(r);n.a},"64b8":function(t,e,a){},6853:function(t,e,a){"use strict";var r=a("8808"),n=a.n(r);n.a},7470:function(t,e,a){},8808:function(t,e,a){},c92b:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"List"},[a("div",{staticClass:"input_flex"},[a("div",{staticClass:"fl"}),a("div",{staticClass:"demo-input-suffix"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.scan_out}},[t._v("导出")])],1)]),a("el-table",{staticStyle:{width:"100%","margin-top":"1rem","margin-bottom":"1rem"},attrs:{data:t.tableData,"header-cell-style":t.tableheader}},[a("el-table-column",{attrs:{label:"序号",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.id))])]}}])}),a("el-table-column",{attrs:{label:"托盘名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.name))])]}}])}),a("el-table-column",{attrs:{label:"托盘条码",prop:"parts_number"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.parts_number))])]}}])}),a("el-table-column",{attrs:{label:"托盘状态",prop:"is_use"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{underline:!1,type:2===e.row.is_use?"success":3===e.row.is_use?"info":4===e.row.is_use?"danger":"info","close-transition":""}},[t._v("\n\t\t\t\t\t"+t._s(e.row.is_use_)+"\n\t\t\t\t")])]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"parts_number"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.trayPrint(e.row)}}},[t._v("打印")]),1==e.row.is_use?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.getTotray(e.row.parts_number)}}},[t._v("装盘")]):t._e(),e.row.is_use>=2?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showtraylist(e.row)}}},[t._v("查看")]):t._e(),e.row.is_use>=2?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.exportcode(e.row)}}},[t._v("导出")]):t._e(),4==e.row.is_use?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("清空")]):t._e()]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":t.pagesize,layout:"sizes, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1),a("Traylist",{ref:"child",attrs:{traylistDV:t.traylistDV},on:{change:t.traylistClose}}),a("Print",{ref:"Printchild",attrs:{Printdialog:t.PrintDV},on:{change:t.PrintClose}})],1)},n=[],s=a("cebc"),i=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"traylist_dialog",attrs:{visible:t.traylistDV.dialog,top:"10vh","close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(e){return t.$set(t.traylistDV,"dialog",e)},close:t.close}},[a("div",{staticClass:"traylist"},[a("div",{staticClass:"tratlist_title"},[a("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t托盘名称："+t._s(t.traylistDV.obj.name)+"\n\t\t\t\t\t")]),a("div",{staticClass:"title"},[t._v("\n\t\t\t\t\t\t装盘状态："+t._s(t.traylistDV.obj.is_use_)+"\n\t\t\t\t\t")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.traylistTableData.loading,expression:"traylistTableData.loading"}],ref:"traylistTableData",attrs:{data:t.traylistTableData.tableData,height:"635","element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"零件名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.product_name||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"图样名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.product_item||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"型号规格"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.product_specs||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"材料"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.product_material||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"条码",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.product_parts_number||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"数量",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{},[t._v(t._s(e.row.number||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"类型",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("el-link",{attrs:{underline:!1}},[t._v("标准件")]):t._e(),2==e.row.type?a("el-link",{attrs:{underline:!1}},[t._v("加工件")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?a("el-link",{attrs:{underline:!1,type:"primary"}},[t._v("装盘中")]):t._e(),1==e.row.status?a("el-link",{attrs:{underline:!1,type:"success"}},[t._v("已出库")]):t._e(),2==e.row.status?a("el-link",{attrs:{underline:!1,type:"success"}},[t._v("装配中")]):t._e(),3==e.row.status?a("el-link",{attrs:{underline:!1,type:"success"}},[t._v("-- --")]):t._e()]}}])})],1)],1)])],1)},o=[],u={name:"traylist",components:{},computed:Object(s["a"])({},Object(i["c"])({url:function(t){return t.url}}),Object(i["b"])({token:"getToken"})),props:{traylistDV:""},data:function(){return{search_name:"",lengths:0,traylistTableData:{tableData:[],currentPage:1,pageSize:15,total:16,loading:!0},statusLeng:0,row:{},nullImg:"http://zrui.e7vr.com/image/arm/default.gif"}},methods:{getSingle:function(){var t=this,e=t.traylistDV.obj;t.axios({method:"GET",url:t.url+"/api/v1/tray/product-detail",params:{id:e.id,status:e.is_use},headers:{"content-type":"application/json",token:t.token}}).then(function(e){if(e&&e.data&&e.data.data&&200==e.data.code){var a=e.data.data;t.traylistTableData.tableData=a,t.traylistTableData.loading=!1}}).catch(function(e){console.log(e),t.traylistTableData.loading=!1})},clearSearchChange:function(){this.search_name=""},handleCurrentChange:function(t){this.traylistTableData.currentPage=t,this.getSingle()},close:function(){this.statusLeng=0,this.search_name="",this.traylistTableData={tableData:[],currentPage:1,pageSize:15,total:0,loading:!0},this.$emit("change",!1)}}},c=u,d=(a("0993"),a("2877")),p=Object(d["a"])(c,l,o,!1,null,"de850f8a",null),m=p.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"Print_dialog",attrs:{visible:t.Printdialog.dialog,top:"10vh",title:"打印","close-on-click-modal":!1,width:"400px"},on:{"update:visible":function(e){return t.$set(t.Printdialog,"dialog",e)},close:t.close}},[a("div",{staticClass:"Printdialog"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"打印机",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择打印机"},model:{value:t.ruleForm.region,callback:function(e){t.$set(t.ruleForm,"region",e)},expression:"ruleForm.region"}},t._l(t.printlist,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.sn}})}),1)],1),a("el-form-item",{attrs:{label:"打印类型",prop:"resource"}},[a("el-radio-group",{attrs:{size:"medium"},model:{value:t.ruleForm.resource,callback:function(e){t.$set(t.ruleForm,"resource",e)},expression:"ruleForm.resource"}},[a("el-radio",{attrs:{border:"",label:"1"}},[t._v("托盘")]),a("el-radio",{attrs:{border:"",label:"2",disabled:1==t.row.is_use}},[t._v("零件")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)])],1)},g=[],h=(a("7f7f"),{name:"Printdialog",components:{},computed:Object(s["a"])({},Object(i["c"])({url:function(t){return t.url}}),Object(i["b"])({token:"getToken"})),props:{Printdialog:""},data:function(){return{row:{},printlist:[],ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},rules:{region:[{required:!0,message:"请选择打印机",trigger:"change"}],resource:[{required:!0,message:"请选择打印类型",trigger:"change"}]}}},methods:{getPrinterlist:function(){var t=this;t.row=t.Printdialog.obj,t.axios({method:"GET",url:t.url+"/api/v1/printer/list",headers:{"content-type":"application/json",token:t.token}}).then(function(e){if(e&&e.data&&e.data.data&&200==e.data.code){var a=e.data.data;t.printlist=a}}).catch(function(t){console.log(t)})},submitForm:function(t){var e=this;e.$refs[t].validate(function(t){if(!t)return!1;var a={};"1"==e.ruleForm.resource&&(a.name=e.row.name,a.parts_number=e.row.parts_number,a.type=e.ruleForm.resource,a.sn=e.ruleForm.region,e.printerplan(a)),"2"==e.ruleForm.resource&&(a.id=e.row.id,a.status=e.row.is_use,a.sn=e.ruleForm.region,e.printertray(a))})},printerplan:function(t){var e=this;e.axios({method:"POST",url:e.url+"/api/v1/printer/plan",params:t,headers:{"content-type":"application/json",token:e.token}}).then(function(t){t&&200==t.status&&"ok"==t.data.msg&&(e.$message({message:"正在打印中...",type:"success"}),e.close())}).catch(function(t){console.log(t)})},printertray:function(t){var e=this;e.axios({method:"POST",url:e.url+"/api/v1/printer/tray_product",params:t,headers:{"content-type":"application/json",token:e.token}}).then(function(t){t&&200==t.status&&"ok"==t.data.msg&&(e.$message({message:"正在打印中...",type:"success"}),e.close())}).catch(function(t){console.log(t)})},resetForm:function(t){this.$refs[t].resetFields()},close:function(){this.$refs.ruleForm.resetFields(),this.$emit("change",!1)}}}),_=h,b=(a("6853"),Object(d["a"])(_,f,g,!1,null,"8dd2fb64",null)),y=b.exports,v={name:"List",components:{Traylist:m,Print:y},data:function(){return{search:"",search_id:"",search_item:"",search_specs:"",go_num:"",pagesize:15,currpage:1,list:[],tableData:[],total:0,id_:"",status_:"",traylistDV:{dialog:!1,obj:""},PrintDV:{dialog:!1,obj:""}}},computed:Object(s["a"])({},Object(i["b"])({url:"geturl",token:"getToken"})),created:function(){this.jump()},methods:{jump:function(){var t=this;t.axios.get(t.url+"/api/v1/tray/list",{params:{page:t.currpage,size:t.pagesize},headers:{"content-type":"application/x-www-form-urlencoded",token:t.token}}).then(function(e){for(var a=e.data.data.list,r=0;r<a.length;r++)a[r].is_use_=1==a[r].is_use?"空盘":2==a[r].is_use?"装盘中":3==a[r].is_use?"满盘":"装配中";t.total=e.data.data.count.total,t.tableData=e.data.data.list}).catch(function(e){console.log(e),t.$message({message:t.errmessage(e.response.data),type:"warning"})})},showtraylist:function(t){this.traylistDV.dialog=!0,this.traylistDV.obj=t,this.$refs.child.getSingle()},handleEdit:function(t,e){var a=this;a.$alert("确认修改状态","修改状态",{confirmButtonText:"确定",callback:function(t){a.reference(e.id,1)}})},reference:function(t,e){var a=this;a.search_name||localStorage.getItem("lossname_");a.axios.get(a.url+"/api/v1/tray/status",{headers:{"content-type":"application/x-www-form-urlencoded",token:a.token},params:{id:t,status:e}}).then(function(t){200==data.status&&a.jump()}).catch(function(t){console.log(t)})},scan_out:function(){location.href=this.url+"/api/v1/tray/export"},getTotray:function(t){localStorage.setItem("index","2-1"),this.$router.push({path:"/tray_enter",query:{parts_number:t}})},exportcode:function(t){location.href=this.url+"/api/v1/tray/full-export?id="+t.id+"&status="+t.is_use},trayPrint:function(t){this.PrintDV.dialog=!0,this.PrintDV.obj=t,this.$refs.Printchild.getPrinterlist()},traylistClose:function(t){this.traylistDV.dialog=t},PrintClose:function(t){this.PrintDV.dialog=t},tableheader:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;if(0===e)return"height:48px;background:#e5e5e5"},handleSizeChange:function(t){this.pagesize=t,this.jump()},handleCurrentChange:function(t){this.currpage=t,this.jump()}}},w=v,k=(a("1368"),Object(d["a"])(w,r,n,!1,null,"ea9153c6",null));e["default"]=k.exports}}]);