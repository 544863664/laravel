(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70f92fc4"],{"011c":function(e,t,a){"use strict";var n=a("8105"),o=a.n(n);o.a},8105:function(e,t,a){},"8a18":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Parstpage"},[a("div",{staticClass:"search"},[a("div",{staticClass:"demo-input-suffix"},[a("div",[a("el-input",{staticStyle:{width:"30.625rem"},attrs:{"suffix-icon":"el-icon-search",autofocus:"",placeholder:"搜索名称"},on:{input:e.searchChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchChange(t)}},model:{value:e.search_name,callback:function(t){e.search_name="string"===typeof t?t.trim():t},expression:"search_name"}},[a("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.searchChange},slot:"append"},[e._v("搜索")])],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info",plain:""},on:{click:e.clearSearchChange}},[e._v("全部")])],1)])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableData.loading,expression:"tableData.loading "}],attrs:{data:e.tableData.tableList,"header-cell-style":e.tableheader,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.5)"}},[a("el-table-column",{attrs:{label:"编号","min-width":"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.product_id||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.product_name||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"代号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.item||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"型号规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.specs||"-- --"))])]}}])}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.num||""))])]}}])}),a("el-table-column",{attrs:{label:"未生产"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.num-t.row.task_number))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.parstclickdetail(t.row)}}},[e._v("详情")]),a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.exportcode(t.row)}}},[e._v("条码")]),t.row.num!=t.row.task_number?a("el-link",{staticStyle:{"margin-left":"10px"},attrs:{underline:!1,type:"primary"},on:{click:function(a){return e.parstment(t.row)}}},[e._v("生产")]):e._e()]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[15,30,50,100],"page-size":e.tableData.pageSize,layout:"sizes, prev, pager, next",total:e.tableData.total},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)},o=[],s=(a("c5f6"),a("cebc")),r=a("2f62"),l=a("c1df"),i=a.n(l),c={name:"Parstpage",computed:Object(s["a"])({},Object(r["c"])({url:function(e){return e.url}}),Object(r["b"])({token:"getToken"})),filters:{formatDate:function(e){return i()(1e3*e).format("YYYY/MM/DD")}},data:function(){return{search_name:"",tableData:{loading:!0,tableList:[],currentPage:1,pageSize:15,total:0},allCode:[],codeBtnshow:!1,showbtnbtn:!1}},created:function(){this.getParstpage()},methods:{getParstpage:function(){var e=this;e.axios({method:"GET",url:"api/api/v1/supplier/order-product-list",params:{page:e.tableData.currentPage,size:e.tableData.pageSize,name:e.search_name},headers:{"content-type":"application/json",token:e.token}}).then(function(t){if(t&&t.data&&t.data.data&&200==t.data.code){var a=t.data.data.list;e.tableData.total=t.data.data.count.total,a.map(function(e){e.num=Number(e.num),e.task_number=Number(e.task_number)}),e.tableData.tableList=a,e.tableData.loading=!1}}).catch(function(t){console.log(t),e.tableData.loading=!1})},filterTag:function(e,t){return t.status===e},searchChange:function(){this.tableData.currentPage=1,this.search_name||(this.search_name=""),this.getParstpage()},handleSizeChange:function(e){this.tableData.pageSize=e,this.getParstpage()},handleCurrentChange:function(e){this.tableData.currentPage=e,this.getParstpage()},clearSearchChange:function(){this.search_name="",this.tableData.currentPage=1,this.getParstpage()},downCode:function(e,t){var a=this.url;if(e&&t){location.href=a+"/api/v1/supplier/export?type="+t+"&task_id[0]="+e}else this.$message({type:"warning",message:"导出条码出错",offset:300})},handleSelectionChange:function(e){if(e.length>0){this.codeBtnshow=!0;var t="";e.map(function(e,a){e.id&&(t+="&task_id["+a+"]="+e.id)}),this.allCode=t}else this.codeBtnshow=!1,this.allCode=[]},allDownCode:function(e){var t=this.url;console.log(this.allCode,e),location.href=t+"/api/v1/supplier/export?type="+e+this.allCode},downAll:function(){var e=sessionStorage.getItem("Supplierid");e?location.href=this.url+"/api/v1/supplier/export-task?supplier_id="+e+"&name="+this.search_name:this.$message({message:"未知供应商，请检查供应商信息",offset:200})},parstclickdetail:function(e){console.log(e),e.product_id&&this.$router.push({path:"/parstlist",query:{product_id:e.product_id}})},parstment:function(e){var t=this,a=this.$createElement;t.$msgbox({title:"提示",message:a("p",null,[a("span",null,"零件名称："),a("span",{style:"color: teal"},e.product_name),a("span",null,"，数量："),a("span",{style:"color: teal"},e.num-e.task_number)]),showClose:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",beforeClose:function(e,t,a){"confirm"===e?(t.confirmButtonLoading=!0,t.confirmButtonText="添加中...",setTimeout(function(){a(),setTimeout(function(){t.confirmButtonLoading=!1},300)},1e3)):a()}}).then(function(a){t.axios({method:"GET",url:t.url+"/api/v1/supplier/order-task-many",params:{product_id:e.product_id},headers:{"content-type":"application/json",token:t.token}}).then(function(e){e&&e.data&&200==e.data.code&&(t.$message({showClose:!0,message:"操作成功",type:"success"}),t.getParstpage())}).catch(function(e){console.log(e)})})},exportcode:function(e){var t=sessionStorage.getItem("Supplierid");t?location.href=this.url+"/api/v1/supplier/order-detail-export?supplier_id="+t+"&product_id="+e.product_id+"&name="+this.search_name:this.$message({message:"未知供应商，请检查供应商信息",offset:200})},tableheader:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"height:50px;background:#e5e5e5"}}},u=c,p=(a("011c"),a("2877")),d=Object(p["a"])(u,n,o,!1,null,"74322b9e",null);t["default"]=d.exports}}]);